import"../modulepreload-polyfill-B5Qt9EMX.js";import{A as d,I as u,C as m}from"../sdk-CmoZK28I.js";console.log("Welcome to Signup Page");const i=new m,p="https://cloud.appwrite.io/v1",f="6672cfc000031266de15";i.setEndpoint(p).setProject(f);const y=new d(i),n=document.getElementById("signup-form");n.addEventListener("submit",async e=>{e.preventDefault();const r=n.name.value.trim(),t=n.email.value.trim(),s=n.password.value;if(!r||!t||!s){alert("Please fill in all fields.");return}try{const a=await g(t,s,r);console.log("User created successfully:",a),alert(`User created successfully and your ID is: ${a.$id}`),n.reset(),await h(t)}catch(a){w(a)}});async function g(e,r,t,s=3,a=2e3){for(let o=0;o<s;o++)try{return await y.create(u.unique(),e,r,t)}catch(l){if(l.code===429&&o<s-1)console.warn(`Rate limit exceeded, retrying in ${a/1e3} seconds...`),alert(`Rate limit exceeded, retrying in ${a/1e3} seconds...`),await new Promise(c=>setTimeout(c,a));else throw l}}async function h(e){try{(await fetch("http://localhost:3000/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e})})).ok?(console.log("Email sent successfully"),alert("Email sent successfully")):(console.error("Error sending email"),alert("Error sending email"))}catch(r){console.error("Error sending email:",r),alert("Error sending email:",r)}}function w(e){switch(e.code){case 400:E(e);break;case 401:alert("Unauthorized: Please check your API credentials.");break;case 403:alert("Forbidden: You do not have permission to perform this action.");break;case 404:alert("Not Found: The requested resource could not be found.");break;case 409:alert("User already exists. Please try logging in.");break;case 429:alert("Too many requests. Please try again later.");break;case 500:alert("Internal Server Error: Please try again later.");break;case 503:alert("Service Unavailable: The server is currently unable to handle the request.");break;default:console.error("Error creating user:",e),alert("An unknown error occurred. Please try again later.")}}function E(e){const r=e.message.toLowerCase();r.includes("email")?alert("Invalid email format. Please enter a valid email address."):r.includes("password")?alert("Weak password. Please ensure your password meets the required criteria."):alert("Bad Request: Please check your input and try again."),console.error("Bad Request Error:",e),alert("Bad Request Error:",e)}
